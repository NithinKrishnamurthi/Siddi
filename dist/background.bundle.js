(()=>{"use strict";var e={926:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFromString=void 0;const s=n(10);t.parseFromString=function(e){return new s.Dom(e)},r(n(10),t),r(n(992),t)},10:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;const o=n(992),r=n(834),s=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,i=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,a=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,l=/^<[a-z]/,d=/\/>$/,c=/^<\//,u=/^[^<]/,h=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,m=/^('|")|('|")$/g,p=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;function g(e,t){if(!t)return!1;const n=c.test(t),[,r]=t.match(h)||[];return n&&e.nodeName===r||e.isSelfCloseTag||e.nodeType===o.NodeType.text}function f(e,t){const n=u.test(e),s=l.test(e);return n?function(e,t){var n;const r=new o.Node({nodeType:o.NodeType.text,nodeName:"#text",text:e,parentNode:t});return null===(n=null==t?void 0:t.childNodes)||void 0===n||n.push(r),r}(e,t):s?function(e,t){var n;const[,s,l]=e.match(h)||[],c=d.test(e)||p.test(s),u=function(e){return(e.match(i)||[]).map((e=>{a.lastIndex=0;const t=a.exec(e)||[],[,n="",o=""]=t;return new r.NodeAttribute({name:n.trim(),value:o.trim().replace(m,"")})}))}(e),g=new o.Node({nodeType:o.NodeType.element,nodeName:s,namespace:l,attributes:u,childNodes:[],parentNode:t,selfCloseTag:c});return null===(n=null==t?void 0:t.childNodes)||void 0===n||n.push(g),g}(e,t):null}t.Dom=class{constructor(e){this.rawHTML=e}find(e,t){const n=function(e,t,n=!1){const o=function*(e){const t=function(e){return e.match(s)||[]}(e);let n=null;for(let e=0,o=t.length;e<o;e++){const o=t[e];n=f(o,n)||n,g(n,o)&&(yield n,n=n.parentNode)}for(;n;)yield n,n=n.parentNode}(e),r=[];for(const e of o)if(e&&t(e)&&(r.push(e),n))return r;return r}(this.rawHTML,e,t);return t?n[0]||null:n}getElementsByClassName(e){const t=new RegExp(`^(.*?\\s)?${e}(\\s.*?)?$`);return this.find((e=>Boolean(e.attributes.length&&t.test(e.getAttribute("class")||""))))}getElementsByTagName(e){return this.find((t=>t.nodeName.toUpperCase()===e.toUpperCase()))}getElementById(e){return this.find((t=>t.getAttribute("id")===e),!0)}getElementsByName(e){return this.find((t=>t.getAttribute("name")===e))}getElementsByAttribute(e,t){return this.find((n=>n.getAttribute(e)===t))}}},992:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Node=t.NodeType=void 0,function(e){e[e.element=1]="element",e[e.text=3]="text"}(n||(t.NodeType=n={}));class o{constructor({nodeType:e,namespace:t,selfCloseTag:o,text:r,nodeName:s,childNodes:i,parentNode:a,attributes:l}){this.namespace=t||null,this.nodeType=e,this.isSelfCloseTag=Boolean(o),this.text=r||null,this.nodeName=e===n.element?s:"#text",this.childNodes=i||[],this.parentNode=a,this.attributes=l||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce(((e,t)=>e+(t.nodeType===n.text?t.text:t.outerHTML)),"")}get outerHTML(){if(this.nodeType===n.text)return this.textContent;const e=this.attributes.map((e=>e.name+(e.value?`="${e.value}"`:""))).join(" "),t=`<${this.nodeName}${e.length?" ":""}${e}${this.isSelfCloseTag?"/":""}>`;return this.isSelfCloseTag?t:[t,this.childNodes.map((e=>e.outerHTML)).join(""),`</${this.nodeName}>`].join("")}get textContent(){return this.nodeType===n.text?this.text:this.childNodes.map((e=>e.textContent)).join("").replace(/\x20+/g," ")}getAttribute(e){const t=this.attributes.find((t=>t.name===e));return t?t.value:null}getElementsByTagName(e){return r(this,(t=>t.nodeName.toUpperCase()===e.toUpperCase()))}getElementsByClassName(e){const t=new RegExp(`^(.*?\\s)?${e}(\\s.*?)?$`);return r(this,(e=>Boolean(e.attributes.length&&t.test(e.getAttribute("class")||""))))}getElementsByName(e){return r(this,(t=>Boolean(t.attributes.length&&t.getAttribute("name")===e)))}getElementById(e){return s(this,(t=>Boolean(t.attributes.length&&t.getAttribute("id")===e)))}}function r(e,t){return e.nodeType===n.text?[]:e.childNodes.reduce(((e,o)=>o.nodeType!==n.text&&t(o)?[...e,o,...r(o,t)]:[...e,...r(o,t)]),[])}function s(e,t){for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(t(o))return o;const r=s(o,t);if(r)return r}return null}t.Node=o,o.ELEMENT_NODE=n.element,o.TEXT_NODE=n.text},834:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeAttribute=void 0,t.NodeAttribute=class{constructor({name:e,value:t}){this.name=e,this.value=t}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=n(926);chrome.runtime.onInstalled.addListener((()=>{console.log("Extension Installed"),chrome.storage.local.clear()})),chrome.action.onClicked.addListener((e=>{chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]})})),chrome.alarms.create("updateCosts",{delayInMinutes:1,periodInMinutes:1}),chrome.alarms.onAlarm.addListener((async e=>{if("updateCosts"===e.name){console.log("Alarm fired");const e=await chrome.storage.local.get(null);for(const[t,n]of Object.entries(e))console.log(t,n),fetch(t).then((e=>e.text())).then((e=>{const r=(0,o.parseFromString)(e,"text/html"),s=Array.from(r.getElementsByClassName("product-page-info-container-mfe"))[0].textContent.match(/\$\s*(\d+(\.\d{1,2})?)/)[1];console.log(s,t),console.log(s,t,"fetched"),console.log(s,n)})).catch((e=>console.error("Error fetching data:",e)))}}))})();